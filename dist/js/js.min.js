angular.module("app",["ngResource","ngMessages","ngAnimate","ui.router","satellizer","toastr"]).config(["$authProvider","$stateProvider","$urlRouterProvider","$locationProvider",function(e,t,l,r){function o(e,t){var l=e.defer();return t.isAuthenticated()?l.reject():l.resolve(),l.promise}function i(e,t,l){var r=e.defer();return l.isAuthenticated()?r.resolve():t.path("/login"),r.promise}o.$inject=["$q","$auth"],i.$inject=["$q","$location","$auth"],e.facebook({clientId:"1670205403245071"}),e.google({clientId:"696255640250-ha91c7enlsravhptab5c63punfunlh8u.apps.googleusercontent.com"}),l.otherwise("/"),t.state("home",{url:"/",controller:"homeCtrl",templateUrl:"partials/home.html"}).state("login",{url:"/login",templateUrl:"partials/login.html",controller:"loginCtrl",resolve:{skipIfLoggedIn:o}}).state("signup",{url:"/signup",templateUrl:"partials/signup.html",controller:"signupCtrl",resolve:{skipIfLoggedIn:o}}).state("logout",{url:"/logout",template:null,controller:"logoutCtrl"}).state("profile",{url:"/profile",templateUrl:"partials/profile.html",controller:"profileCtrl",resolve:{loginRequired:i}}).state("test",{url:"/test",controller:"homeCtrl",templateUrl:"partials/test.html"})}]);
angular.module("app").controller("homeCtrl",["$scope","locationService",function(o,t){o.searchByAddress=function(d){t.searchByAddress(d).then(function(t){o.coords={lat:t.data[0].latitude,lon:t.data[0].longitude}})},o.add=function(o){o.loc={},o.loc.coordinates="",t.searchByAddress(o.address).then(function(d){o.loc.coordinates=[d.data[0].longitude,d.data[0].latitude],t.addBrewery(o).then(function(o){})})}}]);
angular.module("app").service("locationService",["$http","$q",function(t,o){function r(){var t=o.defer();return navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(o){t.resolve(o)},function(o){t.reject(o)}),t.promise}this.getAddressFromCoords=function(){var o=r().then(function(o){return t({method:"GET",params:{lat:o.coords.latitude,"long":o.coords.longitude},url:"http://localhost:3001/getAddress"})});return o},this.searchByAddress=function(o){return t({method:"GET",params:{address:o},url:"http://localhost:3001/getCoords"})},this.addBrewery=function(o){return t({method:"POST",data:o,url:"http://localhost:3001/addBrewery"})}}]);
angular.module("app").factory("Account",["$http",function(t){return{getProfile:function(){return t.get("http://localhost:3001/api/me")},updateProfile:function(o){return t.put("http://localhost:3001/api/me",o)}}}]);
angular.module("app").controller("loginCtrl",["$scope","$location","$auth","toastr",function(t,e,n,a){t.login=function(){n.login(t.user).then(function(){a.success("You have successfully signed in!"),e.path("/")})["catch"](function(t){a.error(t.data.message,t.status)})},t.authenticate=function(t){n.authenticate(t).then(function(){a.success("You have successfully signed in with "+t+"!"),e.path("/")})["catch"](function(t){t.error?a.error(t.error):t.data?a.error(t.data.message,t.status):a.error(t)})}}]);
angular.module("app").controller("logoutCtrl",["$location","$auth","toastr",function(o,t,n){t.isAuthenticated()&&t.logout().then(function(){n.info("You have been logged out"),o.path("/")})}]);
angular.module("app").controller("NavbarCtrl",["$scope","$auth",function(t,n){t.isAuthenticated=function(){return n.isAuthenticated()}}]);
angular.module("app").directive("passwordMatch",function(){return{require:"ngModel",scope:{otherModelValue:"=passwordMatch"},link:function(e,o,a,r){r.$validators.compareTo=function(o){return o===e.otherModelValue},e.$watch("otherModelValue",function(){r.$validate()})}}});
angular.module("app").controller("profileCtrl",["$scope","$auth","toastr","Account",function(t,n,e,a){t.getProfile=function(){a.getProfile().then(function(n){t.user=n.data})["catch"](function(t){e.error(t.data.message,t.status)})},t.updateProfile=function(){a.updateProfile(t.user).then(function(){e.success("Profile has been updated")})["catch"](function(t){e.error(t.data.message,t.status)})},t.link=function(a){n.link(a).then(function(){e.success("You have successfully linked a "+a+" account"),t.getProfile()})["catch"](function(t){e.error(t.data.message,t.status)})},t.unlink=function(a){n.unlink(a).then(function(){e.info("You have unlinked a "+a+" account"),t.getProfile()})["catch"](function(t){e.error(t.data?t.data.message:"Could not unlink "+a+" account",t.status)})},t.getProfile()}]);
angular.module("app").controller("signupCtrl",["$scope","$location","$auth","toastr",function(n,e,a,t){n.signup=function(){a.signup(n.user).then(function(n){a.setToken(n),e.path("/"),t.info("You have successfully created a new account and have been signed-in")})["catch"](function(n){t.error(n.data.message)})}}]);
//# sourceMappingURL=maps/js.min.js.map
